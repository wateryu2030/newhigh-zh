# 选股模型与量化交易模型概述

## 📋 概述

基于现有的多维度分析能力，我们设计了两个核心模型：

1. **选股模型 (Stock Screening Model)**: 从大量股票中筛选出最具投资价值的标的
2. **量化交易模型 (Quantitative Trading Model)**: 基于信号生成和风险管理的自动化交易系统

这两个模型充分利用了现有的：
- ✅ 多维度分析师（市场、基本面、新闻、社交媒体）
- ✅ 丰富的数据源（Tushare、AKShare、东方财富、股吧等）
- ✅ 技术指标分析能力
- ✅ LLM驱动的智能决策

## 🎯 核心功能对比

| 功能模块 | 选股模型 | 量化交易模型 |
|---------|---------|-------------|
| **主要目标** | 筛选股票池 | 执行交易策略 |
| **输入** | 候选股票列表 | 单只股票+市场数据 |
| **输出** | 推荐股票+评分 | 交易信号+执行结果 |
| **评分维度** | 技术面、基本面、情绪、新闻 | 技术指标、策略规则 |
| **风险评估** | 综合风险评分 | 止损、止盈、仓位管理 |
| **使用场景** | 定期筛选/行业对比 | 实时交易/回测验证 |

## 🏗️ 系统集成架构

```
┌─────────────────────────────────────────────────────────┐
│              现有分析系统（已实现）                       │
├─────────────────────────────────────────────────────────┤
│  📈 市场分析师  |  📊 基本面分析师                      │
│  📰 新闻分析师  |  💬 社交媒体分析师                    │
│  🧠 LLM决策引擎 |  📡 信号处理                          │
└─────────────────────────────────────────────────────────┘
                    ↓ 提供数据和分析
┌─────────────────────────────────────────────────────────┐
│              新模型（新增实现）                           │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  🔍 选股模型                                             │
│  ├── 股票池生成                                          │
│  ├── 多维评分引擎                                        │
│  ├── 综合评分计算                                        │
│  └── 结果输出                                           │
│                                                          │
│  💹 量化交易模型                                         │
│  ├── 策略管理器（趋势/均值回归/动量/多因子）              │
│  ├── 信号生成器                                          │
│  ├── 交易执行引擎                                        │
│  ├── 风险管理模块                                        │
│  └── 回测引擎                                           │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

## 📊 数据流程

### 选股模型数据流

```
候选股票列表
    ↓
基础筛选（市场类型、市值、流动性等）
    ↓
并行分析（技术面、基本面、情绪、新闻）
    ↓
多维评分计算
    ↓
综合评分排序
    ↓
推荐股票列表
```

### 量化交易模型数据流

```
当前股票 + 历史数据
    ↓
策略信号生成（基于技术指标/分析师报告）
    ↓
风险管理检查（止损、止盈、仓位）
    ↓
交易执行决策
    ↓
订单执行（模拟/实盘）
    ↓
持仓监控和风险控制
```

## 🔧 快速开始

### 1. 选股模型使用

```python
from tradingagents.models import StockScreener, create_screener_config

# 创建选股器
screener = StockScreener()

# 选择策略配置
config = create_screener_config('balanced')  # 平衡型策略

# 执行筛选
result = screener.screen_stocks(
    stock_list=['000001', '600519', '000002'],  # 候选股票
    screening_conditions={'market': ['A股']},
    score_conditions=config['score_conditions'],
    weights=config['weights']
)

# 查看推荐股票
for stock in result['recommended_stocks']:
    print(f"{stock['ticker']}: {stock['scores']['composite']:.2f}分")
```

### 2. 量化交易模型使用

```python
from tradingagents.models import (
    QuantitativeTrader,
    StrategyType,
    SignalType
)

# 初始化交易器
trader = QuantitativeTrader(
    initial_capital=100000.0,
    strategy_type=StrategyType.TREND_FOLLOWING,
    max_positions=5
)

# 生成交易信号
signal, strength, details = trader.generate_signal(
    ticker='002701',
    current_price=7.85,
    market_data=market_df  # DataFrame格式的市场数据
)

# 执行交易
if signal == SignalType.BUY:
    trader.execute_trade(
        ticker='002701',
        signal=signal,
        price=7.85
    )

# 查看投资组合
status = trader.get_portfolio_status()
print(f"总收益率: {status['total_return_percent']:.2f}%")
```

## 📈 策略类型说明

### 选股策略

| 策略类型 | 适用场景 | 权重配置 | 筛选条件 |
|---------|---------|---------|---------|
| **保守型** | 稳健投资 | 基本面50%，技术面25% | 高评分、低风险 |
| **平衡型** | 一般投资 | 技术面35%，基本面35% | 中等评分 |
| **激进型** | 追求收益 | 技术面40%，基本面30% | 技术面优先 |
| **价值型** | 长期持有 | 基本面60%，技术面20% | 低PE/PB |
| **成长型** | 高速增长 | 技术面40%，情绪20% | 高增长率 |

### 交易策略

| 策略类型 | 特点 | 止损 | 止盈 | 适用市场 |
|---------|------|------|------|---------|
| **趋势跟踪** | 跟随趋势 | -5% | +15% | 趋势明显市场 |
| **均值回归** | 回归均值 | -3% | +5% | 震荡市场 |
| **动量策略** | 追逐动量 | -5% | +20% | 强势市场 |
| **多因子** | 综合评估 | -5% | +15% | 所有市场 |

## 🚀 实施路线图

### 阶段一：基础功能（当前）
- ✅ 选股模型框架
- ✅ 量化交易模型框架
- ✅ 基础策略实现
- ✅ 风险管理规则

### 阶段二：功能完善
- ⏳ 完整的数据解析（将现有字符串报告解析为结构化数据）
- ⏳ 实时价格获取
- ⏳ 回测引擎完整实现
- ⏳ 性能评估指标

### 阶段三：高级功能
- ⏳ 机器学习模型集成
- ⏳ 策略优化和参数调优
- ⏳ 组合优化
- ⏳ 实盘交易对接

### 阶段四：智能化
- ⏳ 自适应权重调整
- ⏳ 策略自动切换
- ⏳ 智能仓位管理
- ⏳ 风险预警系统

## 📚 相关文档

- [选股模型详细设计](./stock_screening_model.md)
- [量化交易模型详细设计](./quantitative_trading_model.md)
- [使用示例](../../examples/)

## ⚠️ 注意事项

1. **数据依赖**: 模型依赖现有的数据源和分析能力，需要确保数据源正常
2. **风险提示**: 所有模型和策略仅供参考，不构成投资建议
3. **回测验证**: 实盘使用前必须进行充分的回测验证
4. **资金管理**: 建议使用模拟资金先进行测试

## 💡 下一步

1. 运行示例代码，了解基本用法
2. 根据需求调整权重和策略参数
3. 使用自己的股票池进行筛选测试
4. 进行历史数据回测，验证策略有效性
5. 逐步集成到现有系统中
