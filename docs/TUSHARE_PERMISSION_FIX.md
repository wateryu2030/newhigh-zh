# Tushare权限问题解决方案

## 🔍 问题现象

测试Tushare时出现错误：
```
抱歉，您没有接口访问权限，权限的具体详情访问：https://tushare.pro/document/1?doc_id=108
```

## 💡 原因分析

Tushare采用**积分制**权限管理：
- **基础接口**（如`stock_basic`）：通常免费可用
- **高级接口**（如`daily_basic`获取PE、PB、市值）：需要积分或付费

## 🚀 解决方案

### 方案1：完成实名认证（推荐，免费）

1. **登录Tushare账号**
   - 访问：https://tushare.pro
   - 使用您的账号登录

2. **完成实名认证**
   - 进入"个人中心"
   - 点击"实名认证"
   - 上传身份证照片（正反面）
   - 等待审核（通常1-2小时）

3. **检查积分状态**
   - 认证通过后会赠送积分（通常120积分）
   - 在"个人中心"查看积分余额
   - 查看可用接口列表

4. **重新测试**
   - 认证通过后，重新运行下载脚本
   - 系统会自动使用Tushare获取数据

### 方案2：升级账户（如果需要更多积分）

如果免费积分不够用，可以考虑：

1. **积分版**（¥500/年）
   - 更高的调用限制
   - 更多数据字段

2. **专业版**（¥3000/年）
   - 无限制调用
   - 全量数据

### 方案3：使用免费接口（降级方案）

如果暂时无法完成认证，系统会自动降级：
- 优先尝试Tushare基础接口（`stock_basic`）
- 如果基础接口可用，至少能获取股票代码和名称
- 如果Tushare完全不可用，自动使用AKShare

## 📊 接口权限对照表

| 接口 | 功能 | 免费版 | 积分版 | 专业版 |
|------|------|--------|--------|--------|
| `stock_basic` | 股票基本信息 | ✅ | ✅ | ✅ |
| `daily_basic` | 每日指标（PE、PB、市值） | 需要积分 | ✅ | ✅ |
| `daily` | 日线行情 | 需要积分 | ✅ | ✅ |

## 🔧 系统自动处理

系统已实现智能降级：

1. **首先尝试**：使用Tushare的`daily_basic`获取完整数据（PE、PB、市值）
2. **如果失败**：尝试Tushare的`stock_basic`获取基础信息（代码、名称）
3. **如果都失败**：自动降级到AKShare作为备用

这样可以确保：
- ✅ 如果有权限，获取完整数据
- ✅ 如果权限不足，至少获取基础信息
- ✅ 永远不会完全失败

## 💡 建议操作步骤

1. **立即操作**：
   - 登录 https://tushare.pro
   - 检查账号状态和积分余额
   - 如果未认证，完成实名认证

2. **验证权限**：
   - 等待认证通过（1-2小时）
   - 查看积分余额和可用接口

3. **重新测试**：
   - 运行下载脚本
   - 系统会自动检测权限并使用合适的接口

## 📞 获取帮助

如果遇到问题：
- 查看Tushare官方文档：https://tushare.pro/document/1?doc_id=108
- 联系Tushare客服：QQ群 958517905
- 或查看系统日志了解详细错误信息

