# BaoStockæ‰©å±•æ•°æ®ä¸‹è½½æ€»ç»“

## ğŸ“Š å·²å®ç°çš„æ•°æ®ä¸‹è½½åŠŸèƒ½

### 1. âœ… è¡Œä¸šåˆ†ç±»æ•°æ®
- **æ¥å£**: `bs.query_stock_industry()`
- **è¡¨**: `stock_concept_industry`
- **å­—æ®µ**: ts_code, industry_sw (ç”³ä¸‡è¡Œä¸š), industry_csrc (è¯ç›‘ä¼šè¡Œä¸š)
- **çŠ¶æ€**: âœ… å·²å®ç°
- **æ›´æ–°é¢‘ç‡**: æ¯æœˆæ›´æ–°ä¸€æ¬¡

### 2. âœ… æŒ‡æ•°æ•°æ®
- **æ¥å£**: `bs.query_history_k_data_plus(index_code, ...)`
- **è¡¨**: `market_index_daily`
- **æŒ‡æ•°åˆ—è¡¨**:
  - ä¸Šè¯æŒ‡æ•° (sh.000001)
  - æ·±è¯æˆæŒ‡ (sz.399001)
  - åˆ›ä¸šæ¿æŒ‡ (sz.399006)
  - æ²ªæ·±300 (sh.000300)
  - ä¸­è¯500 (sh.000905)
  - ä¸Šè¯50 (sh.000016)
- **çŠ¶æ€**: âœ… å·²å®ç°
- **æ›´æ–°é¢‘ç‡**: æ¯æ—¥æ›´æ–°

### 3. âœ… æŒ‡æ•°æˆåˆ†è‚¡
- **æ¥å£**: 
  - `bs.query_hs300_stocks()` - æ²ªæ·±300
  - `bs.query_sz50_stocks()` - ä¸Šè¯50
  - `bs.query_zz500_stocks()` - ä¸­è¯500
- **è¡¨**: `index_constituents` (éœ€æ‰§è¡Œdb_extend.sqlåˆ›å»º)
- **çŠ¶æ€**: âœ… å·²å®ç°
- **æ›´æ–°é¢‘ç‡**: æ¯å­£åº¦æ›´æ–°

### 4. âœ… è´¢åŠ¡æ•°æ® - åˆ©æ¶¦è¡¨
- **æ¥å£**: `bs.query_profit_data(code, year, quarter)`
- **è¡¨**: `stock_financials_profit` (éœ€æ‰§è¡Œdb_extend.sqlåˆ›å»º)
- **å­—æ®µ**: revenue, operating_profit, net_profit, eps, roe, gross_profit_marginç­‰
- **çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆæŒ‰éœ€ä¸‹è½½ï¼‰
- **æ›´æ–°é¢‘ç‡**: æ¯å­£åº¦æ›´æ–°

### 5. âœ… ä¸šç»©é¢„å‘Š
- **æ¥å£**: `bs.query_forecast_report(code, start_date, end_date)`
- **è¡¨**: `stock_performance_forecast` (éœ€æ‰§è¡Œdb_extend.sqlåˆ›å»º)
- **çŠ¶æ€**: âœ… å·²å®ç°ï¼ˆæŒ‰éœ€ä¸‹è½½ï¼‰
- **æ›´æ–°é¢‘ç‡**: å®æ—¶æ›´æ–°

---

## ğŸ”§ å¯æ‰©å±•çš„æ•°æ®æ¥å£ï¼ˆæœªå®ç°ï¼Œä½†æ¥å£å·²å‡†å¤‡å¥½ï¼‰

### 6. âš ï¸ èµ„äº§è´Ÿå€ºè¡¨
- **æ¥å£**: `bs.query_balance_data(code, year, quarter)`
- **è¡¨**: `stock_financials_balance` (è¡¨ç»“æ„å·²åˆ›å»º)
- **çŠ¶æ€**: âš ï¸ è¡¨ç»“æ„å·²å‡†å¤‡ï¼Œä¸‹è½½å‡½æ•°å¯å‚è€ƒåˆ©æ¶¦è¡¨å®ç°

### 7. âš ï¸ ç°é‡‘æµé‡è¡¨
- **æ¥å£**: `bs.query_cash_flow_data(code, year, quarter)`
- **è¡¨**: `stock_financials_cashflow` (è¡¨ç»“æ„å·²åˆ›å»º)
- **çŠ¶æ€**: âš ï¸ è¡¨ç»“æ„å·²å‡†å¤‡ï¼Œä¸‹è½½å‡½æ•°å¯å‚è€ƒåˆ©æ¶¦è¡¨å®ç°

### 8. âš ï¸ ä¸šç»©å¿«æŠ¥
- **æ¥å£**: `bs.query_performance_express_report(code, start_date, end_date)`
- **è¡¨**: `stock_performance_express` (è¡¨ç»“æ„å·²åˆ›å»º)
- **çŠ¶æ€**: âš ï¸ è¡¨ç»“æ„å·²å‡†å¤‡ï¼Œä¸‹è½½å‡½æ•°å¯å‚è€ƒä¸šç»©é¢„å‘Šå®ç°

### 9. âš ï¸ æˆé•¿èƒ½åŠ›æ•°æ®
- **æ¥å£**: `bs.query_growth_data(code, year, quarter)`
- **ç”¨é€”**: è¥æ”¶å¢é•¿ç‡ã€å‡€åˆ©æ¶¦å¢é•¿ç‡ç­‰

### 10. âš ï¸ è¥è¿èƒ½åŠ›æ•°æ®
- **æ¥å£**: `bs.query_operation_data(code, year, quarter)`
- **ç”¨é€”**: å­˜è´§å‘¨è½¬ç‡ã€åº”æ”¶è´¦æ¬¾å‘¨è½¬ç‡ç­‰

### 11. âš ï¸ æœé‚¦æŒ‡æ•°
- **æ¥å£**: `bs.query_dupont_data(code, year, quarter)`
- **ç”¨é€”**: æœé‚¦åˆ†ææŒ‡æ ‡

### 12. âš ï¸ è‚¡æ¯åˆ†çº¢
- **æ¥å£**: `bs.query_dividend_data(code, year)`
- **ç”¨é€”**: åˆ†çº¢æ´¾æ¯ä¿¡æ¯

### 13. âš ï¸ å¤æƒå› å­
- **æ¥å£**: `bs.query_adjust_factor(code, start_date, end_date)`
- **ç”¨é€”**: å‰å¤æƒã€åå¤æƒå› å­

---

## ğŸ“‹ ä½¿ç”¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ‰©å±•æ•°æ®åº“è¡¨ç»“æ„
```bash
mysql -u root -p stock_db < data_engine/db_extend.sql
```

### ç¬¬äºŒæ­¥ï¼šä¸‹è½½æ‰©å±•æ•°æ®
```bash
# ä¸‹è½½æ‰€æœ‰æ‰©å±•æ•°æ®ï¼ˆè¡Œä¸šã€æŒ‡æ•°ã€æˆåˆ†è‚¡ï¼‰
python3 data_engine/fetch_extended_data.py

# æˆ–è€…å•ç‹¬ä¸‹è½½æŸä¸ªç±»å‹
python3 -c "
from data_engine.fetch_extended_data import fetch_stock_industry, fetch_index_daily
fetch_stock_industry()
fetch_index_daily()
"
```

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ•°æ®
```sql
-- æŸ¥çœ‹è¡Œä¸šåˆ†ç±»æ•°æ®
SELECT COUNT(*) FROM stock_concept_industry;

-- æŸ¥çœ‹æŒ‡æ•°æ•°æ®
SELECT index_code, name, COUNT(*) as days 
FROM market_index_daily 
GROUP BY index_code, name;

-- æŸ¥çœ‹æˆåˆ†è‚¡æ•°æ®
SELECT index_name, COUNT(*) as stocks 
FROM index_constituents 
GROUP BY index_name;
```

---

## ğŸ¯ æ•°æ®ä¼˜å…ˆçº§å»ºè®®

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³ä¸‹è½½ï¼‰
1. âœ… **è¡Œä¸šåˆ†ç±»æ•°æ®** - ç”¨äºè‚¡ç¥¨ç­›é€‰å’Œåˆ†ç±»
2. âœ… **æŒ‡æ•°æ•°æ®** - ç”¨äºåŸºå‡†å¯¹æ¯”å’Œè¶‹åŠ¿åˆ†æ
3. âœ… **æŒ‡æ•°æˆåˆ†è‚¡** - ç”¨äºæŒ‡æ•°ç›¸å…³åˆ†æ

### ä¸­ä¼˜å…ˆçº§ï¼ˆæŒ‰éœ€ä¸‹è½½ï¼‰
4. âš ï¸ **åˆ©æ¶¦è¡¨æ•°æ®** - ç”¨äºè´¢åŠ¡åˆ†æï¼ˆæ•°æ®é‡å¤§ï¼Œå»ºè®®æŒ‰éœ€ä¸‹è½½ï¼‰
5. âš ï¸ **ä¸šç»©é¢„å‘Š** - ç”¨äºä¸šç»©é¢„æµ‹åˆ†æ

### ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰
6. âš ï¸ **èµ„äº§è´Ÿå€ºè¡¨** - å®Œæ•´è´¢åŠ¡åˆ†æéœ€è¦
7. âš ï¸ **ç°é‡‘æµé‡è¡¨** - å®Œæ•´è´¢åŠ¡åˆ†æéœ€è¦
8. âš ï¸ **å…¶ä»–è´¢åŠ¡æŒ‡æ ‡** - æ ¹æ®åˆ†æéœ€æ±‚å†³å®š

---

## ğŸ“Š æ•°æ®é‡ä¼°ç®—

- **è¡Œä¸šåˆ†ç±»**: ~5,500æ¡ï¼ˆæ¯åªè‚¡ç¥¨1-2æ¡ï¼‰
- **æŒ‡æ•°æ•°æ®**: ~6ä¸ªæŒ‡æ•° Ã— 250ä¸ªäº¤æ˜“æ—¥/å¹´ = 1,500æ¡/å¹´
- **æˆåˆ†è‚¡**: ~1,500æ¡ï¼ˆæ²ªæ·±300+ä¸Šè¯50+ä¸­è¯500ï¼‰
- **åˆ©æ¶¦è¡¨**: ~5,500åªè‚¡ç¥¨ Ã— 4ä¸ªå­£åº¦ Ã— 3å¹´ = 66,000æ¡
- **ä¸šç»©é¢„å‘Š**: ~5,500åªè‚¡ç¥¨ Ã— 2æ¬¡/å¹´ = 11,000æ¡/å¹´

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®é‡**: è´¢åŠ¡æ•°æ®é‡è¾ƒå¤§ï¼Œå»ºè®®åˆ†æ‰¹ä¸‹è½½æˆ–æŒ‰éœ€ä¸‹è½½
2. **æ›´æ–°é¢‘ç‡**: 
   - è¡Œä¸šåˆ†ç±»ï¼šæ¯æœˆæ›´æ–°
   - æŒ‡æ•°æ•°æ®ï¼šæ¯æ—¥æ›´æ–°
   - è´¢åŠ¡æ•°æ®ï¼šæ¯å­£åº¦æ›´æ–°
   - ä¸šç»©é¢„å‘Šï¼šå®æ—¶æ›´æ–°
3. **APIé™åˆ¶**: BaoStockæœ‰è¯·æ±‚é¢‘ç‡é™åˆ¶ï¼Œå»ºè®®ä½¿ç”¨SLEEP_SEC_WEBé—´éš”
4. **æ•°æ®å®Œæ•´æ€§**: éƒ¨åˆ†è‚¡ç¥¨å¯èƒ½æ²¡æœ‰æŸäº›è´¢åŠ¡æ•°æ®ï¼Œå±äºæ­£å¸¸æƒ…å†µ

---

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `fetch_extended_data.py` - æ‰©å±•æ•°æ®ä¸‹è½½æ¨¡å—
- `db_extend.sql` - æ•°æ®åº“æ‰©å±•è¡¨ç»“æ„
- `BAOSTOCK_API_REFERENCE.md` - BaoStock APIå®Œæ•´å‚è€ƒ
- `fetch_data.py` - åŸºç¡€æ•°æ®ä¸‹è½½æ¨¡å—ï¼ˆè‚¡ç¥¨åŸºç¡€ä¿¡æ¯ã€æ—¥Kæ•°æ®ï¼‰

